{"remainingRequest":"/Users/pratyaphocha/village-servay/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/pratyaphocha/village-servay/src/pages/Login/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/pratyaphocha/village-servay/src/pages/Login/Login.vue","mtime":1626539669921},{"path":"/Users/pratyaphocha/village-servay/node_modules/cache-loader/dist/cjs.js","mtime":1626176668222},{"path":"/Users/pratyaphocha/village-servay/node_modules/babel-loader/lib/index.js","mtime":1626179369206},{"path":"/Users/pratyaphocha/village-servay/node_modules/cache-loader/dist/cjs.js","mtime":1626176668222},{"path":"/Users/pratyaphocha/village-servay/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1626179382467}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zIH0gZnJvbSAidnVleCI7CmltcG9ydCBjb25maWcgZnJvbSAiLi4vLi4vY29uZmlnIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4iLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogdHJ1ZSwKICAgICAgbG9naW5UYWJzOiAiIiwKICAgICAgZW1haWw6ICJhZG1pbkBmbGF0bG9naWMuY29tIiwKICAgICAgZW1haWxSdWxlczogWwogICAgICAgICh2KSA9PiAhIXYgfHwgIkUtbWFpbCBpcyByZXF1aXJlZCIsCiAgICAgICAgKHYpID0+IC8uK0AuKy8udGVzdCh2KSB8fCAiRS1tYWlsIG11c3QgYmUgdmFsaWQiLAogICAgICAgICh2KSA9PiB2LnRvTG93ZXJDYXNlKCkgPT09IHRoaXMuZW1haWwsCiAgICAgIF0sCiAgICAgIGNyZWF0ZUZ1bGxOYW1lOiAiSm9obiBTbWl0aCIsCiAgICAgIGNyZWF0ZUVtYWlsOiAiam9obkBmbGF0bG9naWMuY29tIiwKICAgICAgY3JlYXRlUGFzc3dvcmQ6ICJwYXNzd29yZCIsCiAgICAgIHBhc3N3b3JkOiAicGFzc3dvcmQiLAogICAgICBwYXNzUnVsZXM6IFsKICAgICAgICAodikgPT4gISF2IHx8ICJQYXNzd29yZCBpcyByZXF1aXJlZCIsCiAgICAgICAgKHYpID0+IHYubGVuZ3RoID49IDYgfHwgIk1pbiA2IGNoYXJhY3RlcnMiLAogICAgICBdLAogICAgICBhbGVydDogZmFsc2UsCiAgICAgIG1lc3NhZ2U6ICIiLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoInJlZ2lzdGVyIiwgWyJyZWdpc3RlclVzZXIiLCAicmVnaXN0ZXJFcnJvciJdKSwKICAgIC4uLm1hcEFjdGlvbnMoImF1dGgiLCBbImxvZ2luVXNlciIsICJyZWNlaXZlVG9rZW4iLCAicmVjZWl2ZUxvZ2luIl0pLAogICAgbG9naW4oKSB7CiAgICAgIC8vIGNvbnN0IGVtYWlsID0gdGhpcy5lbWFpbDsKICAgICAgLy8gY29uc3QgcGFzc3dvcmQgPSB0aGlzLnBhc3N3b3JkOwogICAgICAvLyB0aGlzLmxvZ2luVXNlcih7ZW1haWwsIHBhc3N3b3JkfSk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbWFwIik7CiAgICB9LAogICAgZ29vZ2xlTG9naW4oKSB7CiAgICAgIHRoaXMubG9naW5Vc2VyKHsgc29jaWFsOiAiZ29vZ2xlIiB9KTsKICAgIH0sCiAgICByZWdpc3RlcigpIHsKICAgICAgY29uc3QgZW1haWwgPSB0aGlzLmNyZWF0ZUVtYWlsOwogICAgICBjb25zdCBwYXNzd29yZCA9IHRoaXMuY3JlYXRlUGFzc3dvcmQ7CgogICAgICB0aGlzLnJlZ2lzdGVyVXNlcih7IGNyZWRzOiB7IGVtYWlsLCBwYXNzd29yZCB9IH0pOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmxvZ2luVGFicyA9ICJ0YWItbG9naW4iOwogICAgICB9LCAxNTAwKTsKICAgIH0sCiAgICB2YWxpZGF0ZSgpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMubG9nLnZhbGlkYXRlKCkpIHsKICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oImF1dGhlbnRpY2F0ZWQiLCB0cnVlKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3VzZXIvcHJvZmlsZSIpOwogICAgICB9CiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCJhdXRoIiwgewogICAgICBpc0ZldGNoaW5nOiAoc3RhdGUpID0+IHN0YXRlLmlzRmV0Y2hpbmcsCiAgICAgIGVycm9yTWVzc2FnZTogKHN0YXRlKSA9PiBzdGF0ZS5lcnJvck1lc3NhZ2UsCiAgICB9KSwKICAgIC4uLm1hcFN0YXRlKCJyZWdpc3RlciIsIHsKICAgICAgcmVnSXNGZXRjaGluZzogKHN0YXRlKSA9PiBzdGF0ZS5pc0ZldGNoaW5nLAogICAgICByZWdFcnJvck1lc3NhZ2U6IChzdGF0ZSkgPT4gc3RhdGUuZXJyb3JNZXNzYWdlLAogICAgfSksCiAgfSwKCiAgd2F0Y2g6IHsKICAgIGVycm9yTWVzc2FnZSgpIHsKICAgICAgdGhpcy5tZXNzYWdlID0gdGhpcy5lcnJvck1lc3NhZ2U7CiAgICAgIHRoaXMuYWxlcnQgPSB0cnVlOwogICAgfSwKICAgIHJlZ0Vycm9yTWVzc2FnZSgpIHsKICAgICAgdGhpcy5tZXNzYWdlID0gdGhpcy5yZWdFcnJvck1lc3NhZ2U7CiAgICAgIHRoaXMuYWxlcnQgPSB0cnVlOwogICAgfSwKICB9LAoKICBjcmVhdGVkKCkgewogICAgbGV0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIik7CiAgICBpZiAodG9rZW4pIHsKICAgICAgdGhpcy5yZWNlaXZlVG9rZW4odG9rZW4pOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHRoaXMuaXNBdXRoZW50aWNhdGVkKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpKSkgewogICAgICAgIHRoaXMucmVjZWl2ZUxvZ2luKCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBjb25zdCBjcmVkcyA9IGNvbmZpZy5hdXRoOwogICAgdGhpcy5lbWFpbCA9IGNyZWRzLmVtYWlsOwogICAgdGhpcy5wYXNzd29yZCA9IGNyZWRzLnBhc3N3b3JkOwogIH0sCn07Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/pages/Login","sourcesContent":["<template>\n  <v-app>\n    <v-container fluid>\n      <v-row>\n        <v-col cols=\"12\" md=\"4\"> </v-col>\n        <v-col cols=\"12\" md=\"4\" class=\"mt-16 set-shadow-login\">\n          <div class=\"text-center mt-10\">\n            <v-icon\n              style=\"background: #686868;\n  -webkit-background-clip: text;\n  background-clip: text;\n  color: transparent;\n  text-shadow: rgba(255, 255, 255, 0.5) 1px 2px 1px;\n  font-size: 120px;\"\n              >mdi-file-document-edit-outline</v-icon\n            >\n          </div>\n          <h2 class=\"text-center mt-5\">แบบประเมินชุมชนสลัม</h2>\n          <!-- <label class=\"pl-12\">Username</label> -->\n          <v-text-field\n            label=\"Username\"\n            prepend-icon=\"fa-user\"\n            class=\"px-3\"\n            solo\n          ></v-text-field>\n          <!-- <label class=\"pl-12\">Password</label> -->\n          <v-text-field\n            label=\"รหัสผ่าน\"\n            prepend-icon=\"fa-lock\"\n            class=\"px-3\"\n            solo\n          ></v-text-field>\n          <div class=\"mx-3 my-10\">\n            <v-btn\n              color=\"primary\"\n              outlined\n              block\n              class=\"rounded-lg mb-3 elevation-4\"\n              x-large\n              @click=\"login()\"\n              >เข้าสู่ระบบ</v-btn\n            >\n          </div>\n        </v-col>\n        <v-col cols=\"12\" md=\"4\"> </v-col>\n      </v-row>\n    </v-container>\n    <v-snackbar v-model=\"alert\" color=\"error\">\n      {{ message }}\n      <template v-slot:action=\"{ attrs }\">\n        <v-btn dark text v-bind=\"attrs\" @click=\"alert = false\">\n          Close\n        </v-btn>\n      </template>\n    </v-snackbar>\n  </v-app>\n</template>\n\n<script>\nimport { mapState, mapActions } from \"vuex\";\nimport config from \"../../config\";\n\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      valid: true,\n      loginTabs: \"\",\n      email: \"admin@flatlogic.com\",\n      emailRules: [\n        (v) => !!v || \"E-mail is required\",\n        (v) => /.+@.+/.test(v) || \"E-mail must be valid\",\n        (v) => v.toLowerCase() === this.email,\n      ],\n      createFullName: \"John Smith\",\n      createEmail: \"john@flatlogic.com\",\n      createPassword: \"password\",\n      password: \"password\",\n      passRules: [\n        (v) => !!v || \"Password is required\",\n        (v) => v.length >= 6 || \"Min 6 characters\",\n      ],\n      alert: false,\n      message: \"\",\n    };\n  },\n  methods: {\n    ...mapActions(\"register\", [\"registerUser\", \"registerError\"]),\n    ...mapActions(\"auth\", [\"loginUser\", \"receiveToken\", \"receiveLogin\"]),\n    login() {\n      // const email = this.email;\n      // const password = this.password;\n      // this.loginUser({email, password});\n      this.$router.push(\"/map\");\n    },\n    googleLogin() {\n      this.loginUser({ social: \"google\" });\n    },\n    register() {\n      const email = this.createEmail;\n      const password = this.createPassword;\n\n      this.registerUser({ creds: { email, password } });\n      setTimeout(() => {\n        this.loginTabs = \"tab-login\";\n      }, 1500);\n    },\n    validate() {\n      if (this.$refs.log.validate()) {\n        window.localStorage.setItem(\"authenticated\", true);\n        this.$router.push(\"/user/profile\");\n      }\n    },\n  },\n  computed: {\n    ...mapState(\"auth\", {\n      isFetching: (state) => state.isFetching,\n      errorMessage: (state) => state.errorMessage,\n    }),\n    ...mapState(\"register\", {\n      regIsFetching: (state) => state.isFetching,\n      regErrorMessage: (state) => state.errorMessage,\n    }),\n  },\n\n  watch: {\n    errorMessage() {\n      this.message = this.errorMessage;\n      this.alert = true;\n    },\n    regErrorMessage() {\n      this.message = this.regErrorMessage;\n      this.alert = true;\n    },\n  },\n\n  created() {\n    let token = localStorage.getItem(\"token\");\n    if (token) {\n      this.receiveToken(token);\n    } else {\n      if (this.isAuthenticated(localStorage.getItem(\"token\"))) {\n        this.receiveLogin();\n      }\n    }\n  },\n  mounted() {\n    const creds = config.auth;\n    this.email = creds.email;\n    this.password = creds.password;\n  },\n};\n</script>\n\n<style src=\"./Login.scss\" lang=\"scss\" />\n"]}]}