{"remainingRequest":"/Users/pratyaphocha/village-servay/node_modules/thread-loader/dist/cjs.js!/Users/pratyaphocha/village-servay/node_modules/babel-loader/lib/index.js!/Users/pratyaphocha/village-servay/node_modules/eslint-loader/index.js??ref--13-0!/Users/pratyaphocha/village-servay/src/store/register.js","dependencies":[{"path":"/Users/pratyaphocha/village-servay/src/store/register.js","mtime":1623036518000},{"path":"/Users/pratyaphocha/village-servay/node_modules/cache-loader/dist/cjs.js","mtime":1626176668222},{"path":"/Users/pratyaphocha/village-servay/node_modules/thread-loader/dist/cjs.js","mtime":1626176668505},{"path":"/Users/pratyaphocha/village-servay/node_modules/babel-loader/lib/index.js","mtime":1626179369206},{"path":"/Users/pratyaphocha/village-servay/node_modules/eslint-loader/index.js","mtime":1626176668724}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGNvbmZpZyBmcm9tICIuLi9jb25maWciOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgcm91dGVyIGZyb20gJy4uL1JvdXRlcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICBpc0ZldGNoaW5nOiBmYWxzZSwKICAgIGVycm9yTWVzc2FnZTogJycKICB9LAogIG11dGF0aW9uczogewogICAgUkVHSVNURVJfUkVRVUVTVDogZnVuY3Rpb24gUkVHSVNURVJfUkVRVUVTVChzdGF0ZSkgewogICAgICBzdGF0ZS5pc0ZldGNoaW5nID0gdHJ1ZTsKICAgIH0sCiAgICBSRUdJU1RFUl9TVUNDRVNTOiBmdW5jdGlvbiBSRUdJU1RFUl9TVUNDRVNTKHN0YXRlKSB7CiAgICAgIHN0YXRlLmlzRmV0Y2hpbmcgPSBmYWxzZTsKICAgICAgc3RhdGUuZXJyb3JNZXNzYWdlID0gJyc7CiAgICB9LAogICAgUkVHSVNURVJfRkFJTFVSRTogZnVuY3Rpb24gUkVHSVNURVJfRkFJTFVSRShzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5pc0ZldGNoaW5nID0gZmFsc2U7CiAgICAgIHN0YXRlLmVycm9yTWVzc2FnZSA9IHBheWxvYWQ7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICByZWdpc3RlclVzZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyVXNlcihfcmVmLCBwYXlsb2FkKSB7CiAgICAgIHZhciBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2g7CgogICAgICBpZiAoIWNvbmZpZy5pc0JhY2tlbmQpIHsKICAgICAgICByb3V0ZXIucHVzaCgnL3VzZXIvcHJvZmlsZScpOwogICAgICB9IGVsc2UgewogICAgICAgIGRpc3BhdGNoKCdyZXF1ZXN0UmVnaXN0ZXInKTsKICAgICAgICB2YXIgY3JlZHMgPSBwYXlsb2FkLmNyZWRzOwoKICAgICAgICBpZiAoY3JlZHMuZW1haWwubGVuZ3RoID4gMCAmJiBjcmVkcy5wYXNzd29yZC5sZW5ndGggPiAwKSB7CiAgICAgICAgICBheGlvcy5wb3N0KCIvYXV0aC9zaWdudXAiLCBjcmVkcykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGRpc3BhdGNoKCdyZWNlaXZlUmVnaXN0ZXInKTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgZGlzcGF0Y2goJ3JlZ2lzdGVyRXJyb3InLCBlcnIucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGlzcGF0Y2goJ3JlZ2lzdGVyRXJyb3InLCAnU29tZXRoaW5nIHdhcyB3cm9uZy4gVHJ5IGFnYWluJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcmVxdWVzdFJlZ2lzdGVyOiBmdW5jdGlvbiByZXF1ZXN0UmVnaXN0ZXIoX3JlZjIpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgY29tbWl0KCdSRUdJU1RFUl9SRVFVRVNUJyk7CiAgICB9LAogICAgcmVjZWl2ZVJlZ2lzdGVyOiBmdW5jdGlvbiByZWNlaXZlUmVnaXN0ZXIoX3JlZjMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgICAgY29tbWl0KCdSRUdJU1RFUl9TVUNDRVNTJyk7CiAgICB9LAogICAgcmVnaXN0ZXJFcnJvcjogZnVuY3Rpb24gcmVnaXN0ZXJFcnJvcihfcmVmNCwgcGF5bG9hZCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgICBjb21taXQoJ1JFR0lTVEVSX0ZBSUxVUkUnLCBwYXlsb2FkKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/pratyaphocha/village-servay/src/store/register.js"],"names":["config","axios","router","namespaced","state","isFetching","errorMessage","mutations","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILURE","payload","actions","registerUser","dispatch","isBackend","push","creds","email","length","password","post","then","catch","err","response","data","requestRegister","commit","receiveRegister","registerError"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,WAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAEbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,UAAU,EAAE,KADP;AAELC,IAAAA,YAAY,EAAE;AAFT,GAFM;AAMbC,EAAAA,SAAS,EAAE;AACTC,IAAAA,gBADS,4BACQJ,KADR,EACe;AACtBA,MAAAA,KAAK,CAACC,UAAN,GAAmB,IAAnB;AACD,KAHQ;AAITI,IAAAA,gBAJS,4BAIQL,KAJR,EAIe;AACtBA,MAAAA,KAAK,CAACC,UAAN,GAAmB,KAAnB;AACAD,MAAAA,KAAK,CAACE,YAAN,GAAqB,EAArB;AACD,KAPQ;AAQTI,IAAAA,gBARS,4BAQQN,KARR,EAQeO,OARf,EAQwB;AAC/BP,MAAAA,KAAK,CAACC,UAAN,GAAmB,KAAnB;AACAD,MAAAA,KAAK,CAACE,YAAN,GAAqBK,OAArB;AACD;AAXQ,GANE;AAmBbC,EAAAA,OAAO,EAAE;AACPC,IAAAA,YADO,8BACkBF,OADlB,EAC2B;AAAA,UAApBG,QAAoB,QAApBA,QAAoB;;AAChC,UAAI,CAACd,MAAM,CAACe,SAAZ,EAAuB;AACrBb,QAAAA,MAAM,CAACc,IAAP,CAAY,eAAZ;AACD,OAFD,MAIK;AACHF,QAAAA,QAAQ,CAAC,iBAAD,CAAR;AACA,YAAMG,KAAK,GAAGN,OAAO,CAACM,KAAtB;;AACA,YAAIA,KAAK,CAACC,KAAN,CAAYC,MAAZ,GAAqB,CAArB,IAA0BF,KAAK,CAACG,QAAN,CAAeD,MAAf,GAAwB,CAAtD,EAAyD;AACvDlB,UAAAA,KAAK,CAACoB,IAAN,CAAW,cAAX,EAA2BJ,KAA3B,EAAkCK,IAAlC,CAAuC,YAAM;AAC3CR,YAAAA,QAAQ,CAAC,iBAAD,CAAR;AACD,WAFD,EAEGS,KAFH,CAES,UAAAC,GAAG,EAAI;AACdV,YAAAA,QAAQ,CAAC,eAAD,EAAkBU,GAAG,CAACC,QAAJ,CAAaC,IAA/B,CAAR;AACD,WAJD;AAKD,SAND,MAMO;AACLZ,UAAAA,QAAQ,CAAC,eAAD,EAAkB,gCAAlB,CAAR;AACD;AACF;AACF,KAnBM;AAoBPa,IAAAA,eApBO,kCAoBmB;AAAA,UAATC,MAAS,SAATA,MAAS;AACxBA,MAAAA,MAAM,CAAC,kBAAD,CAAN;AACD,KAtBM;AAuBPC,IAAAA,eAvBO,kCAuBmB;AAAA,UAATD,MAAS,SAATA,MAAS;AACxBA,MAAAA,MAAM,CAAC,kBAAD,CAAN;AACD,KAzBM;AA0BPE,IAAAA,aA1BO,gCA0BiBnB,OA1BjB,EA0B0B;AAAA,UAAlBiB,MAAkB,SAAlBA,MAAkB;AAC/BA,MAAAA,MAAM,CAAC,kBAAD,EAAqBjB,OAArB,CAAN;AACD;AA5BM;AAnBI,CAAf","sourcesContent":["import config from \"../config\";\nimport axios from \"axios\";\nimport router from '../Routes';\n\nexport default {\n  namespaced: true,\n  state: {\n    isFetching: false,\n    errorMessage: ''\n  },\n  mutations: {\n    REGISTER_REQUEST(state) {\n      state.isFetching = true;\n    },\n    REGISTER_SUCCESS(state) {\n      state.isFetching = false;\n      state.errorMessage = '';\n    },\n    REGISTER_FAILURE(state, payload) {\n      state.isFetching = false;\n      state.errorMessage = payload;\n    },\n  },\n  actions: {\n    registerUser({dispatch}, payload) {\n      if (!config.isBackend) {\n        router.push('/user/profile');\n      }\n\n      else {\n        dispatch('requestRegister');\n        const creds = payload.creds;\n        if (creds.email.length > 0 && creds.password.length > 0) {\n          axios.post(\"/auth/signup\", creds).then(() => {\n            dispatch('receiveRegister');\n          }).catch(err => {\n            dispatch('registerError', err.response.data);\n          })\n        } else {\n          dispatch('registerError', 'Something was wrong. Try again');\n        }\n      }\n    },\n    requestRegister({commit}) {\n      commit('REGISTER_REQUEST');\n    },\n    receiveRegister({commit}) {\n      commit('REGISTER_SUCCESS');\n    },\n    registerError({commit}, payload) {\n      commit('REGISTER_FAILURE', payload);\n    },\n  },\n};\n"]}]}